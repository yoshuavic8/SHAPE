(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[675],{7550:(e,t,r)=>{"use strict";r.d(t,{v:()=>d});var s=r(95155),a=r(12115),i=r(55863),l=r(53999);let n=a.forwardRef((e,t)=>{let{className:r,value:a,...n}=e;return(0,s.jsx)(i.bL,{ref:t,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...n,children:(0,s.jsx)(i.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});function d(e){let{currentSection:t,totalSections:r,currentQuestion:a,totalQuestions:i}=e,l=Math.round(t/r*100),d=Math.round(a/i*100);return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Section ",t," of ",r]}),(0,s.jsxs)("span",{children:[l,"% Complete"]})]}),(0,s.jsx)(n,{value:l,className:"h-2"}),(0,s.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Question ",a," of ",i]}),(0,s.jsxs)("span",{children:[d,"% Complete"]})]}),(0,s.jsx)(n,{value:d,className:"h-1"})]})}n.displayName=i.bL.displayName},45629:(e,t,r)=>{Promise.resolve().then(r.bind(r,65496))},49026:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>d,TN:()=>c,XL:()=>o});var s=r(95155),a=r(12115),i=r(74466),l=r(53999);let n=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,...i}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(n({variant:a}),r),...i})});d.displayName="Alert";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});o.displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",r),...a})});c.displayName="AlertDescription"},65496:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(95155),a=r(12115),i=r(35695),l=r(88482),n=r(97168),d=r(49026),o=r(5838),c=r(7550),u=r(85596),f=r(46414),h=r(14503);function m(){let[e,t]=(0,a.useState)({}),[r,m]=(0,a.useState)(0),[x,g]=(0,a.useState)(!1),p=(0,i.useRouter)(),{toast:v}=(0,h.dj)(),j=o.My.find(e=>"heart"===e.id),y=(null==j?void 0:j.questions)||[];(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await f.N.auth.getSession();if(!e){p.push("/auth/login");return}let{data:r}=await f.N.from("questionnaire_results").select("heart_desire").eq("user_id",e.user.id).single();if(null==r?void 0:r.heart_desire){let e={};Object.entries(r.heart_desire).forEach(t=>{let[r,s]=t;e[r]=s}),t(e)}})()},[p]);let N=y[r],b=r===y.length-1,w=async()=>{try{g(!0);let{data:{session:t}}=await f.N.auth.getSession();if(!t){p.push("/auth/login");return}let r={};y.forEach(t=>{let s=e[t.id]||0;r[t.category]||(r[t.category]=[]),r[t.category].push(s)});let s={};Object.entries(r).forEach(e=>{let[t,r]=e,a=r.reduce((e,t)=>e+t,0)/r.length;s[t]=parseFloat(a.toFixed(2))});let{error:a}=await f.N.from("questionnaire_results").update({heart_desire:s}).eq("user_id",t.user.id);if(a)throw a;v({title:"Progress saved",description:"Your answers have been saved successfully"}),p.push("/questionnaire/personality")}catch(e){v({title:"Error",description:e.message||"Failed to save your answers",variant:"destructive"})}finally{g(!1)}},S=N&&void 0!==e[N.id];return(0,s.jsxs)("div",{className:"space-y-6 py-8",children:[(0,s.jsx)(c.v,{currentSection:2,totalSections:4,currentQuestion:r+1,totalQuestions:y.length}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:"Heart Desire (Keinginan Hati)"}),(0,s.jsx)(l.BT,{children:'Jawablah setiap pernyataan dengan skala 1-5, di mana 1 adalah "Sangat Tidak Setuju" dan 5 adalah "Sangat Setuju".'})]}),(0,s.jsxs)(l.Wu,{className:"space-y-4",children:[N&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium mb-4",children:[r+1,". ",N.text]}),(0,s.jsx)(u.z,{questionId:N.id,value:e[N.id]||0,onChange:e=>{t(t=>({...t,[N.id]:e}))}})]}),!S&&(0,s.jsxs)(d.Fc,{variant:"destructive",children:[(0,s.jsx)(d.XL,{children:"Required"}),(0,s.jsx)(d.TN,{children:"Please select a rating before proceeding."})]})]}),(0,s.jsxs)(l.wL,{className:"flex justify-between",children:[(0,s.jsx)(n.$,{variant:"outline",onClick:()=>{r>0?m(r-1):p.push("/questionnaire/spiritual")},children:"Previous"}),b?(0,s.jsx)(n.$,{onClick:w,disabled:!S||x,children:x?"Saving...":"Continue to Next Section"}):(0,s.jsx)(n.$,{onClick:()=>{r<y.length-1&&m(r+1)},disabled:!S,children:"Next Question"})]})]})]})}},82714:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var s=r(95155),a=r(12115),i=r(40968),l=r(74466),n=r(53999);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,n.cn)(d(),r),...a})});o.displayName=i.b.displayName},85596:(e,t,r)=>{"use strict";r.d(t,{z:()=>u});var s=r(95155),a=r(12115),i=r(75122),l=r(9428),n=r(53999);let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.bL,{className:(0,n.cn)("grid gap-2",r),...a,ref:t})});d.displayName=i.bL.displayName;let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.q7,{ref:t,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...a,children:(0,s.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(l.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=i.q7.displayName;var c=r(82714);function u(e){let{questionId:t,value:r,onChange:a}=e;return(0,s.jsx)(d,{value:(null==r?void 0:r.toString())||"",onValueChange:e=>a(Number.parseInt(e)),className:"flex justify-between space-x-1 py-2",children:[1,2,3,4,5].map(e=>(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(o,{value:e.toString(),id:"rating-".concat(t,"-").concat(e),className:"sr-only"}),(0,s.jsx)(c.J,{htmlFor:"rating-".concat(t,"-").concat(e),className:"flex h-12 w-12 cursor-pointer items-center justify-center rounded-full border-2 ".concat(r===e?"border-primary bg-primary text-primary-foreground":"border-muted-foreground/20 hover:border-muted-foreground/40 hover:bg-muted"),children:e}),(0,s.jsx)("span",{className:"mt-1 text-xs text-muted-foreground",children:1===e?"Strongly Disagree":2===e?"Disagree":3===e?"Neutral":4===e?"Agree":"Strongly Agree"})]},e))})}}},e=>{var t=t=>e(e.s=t);e.O(0,[352,769,559,124,257,441,684,358],()=>t(45629)),_N_E=e.O()}]);