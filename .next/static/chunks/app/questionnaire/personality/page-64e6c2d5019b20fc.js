(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[927],{7550:(e,t,s)=>{"use strict";s.d(t,{v:()=>d});var r=s(95155),a=s(12115),l=s(55863),i=s(53999);let n=a.forwardRef((e,t)=>{let{className:s,value:a,...n}=e;return(0,r.jsx)(l.bL,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...n,children:(0,r.jsx)(l.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});function d(e){let{currentSection:t,totalSections:s,currentQuestion:a,totalQuestions:l}=e,i=Math.round(t/s*100),d=Math.round(a/l*100);return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Section ",t," of ",s]}),(0,r.jsxs)("span",{children:[i,"% Complete"]})]}),(0,r.jsx)(n,{value:i,className:"h-2"}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Question ",a," of ",l]}),(0,r.jsxs)("span",{children:[d,"% Complete"]})]}),(0,r.jsx)(n,{value:d,className:"h-1"})]})}n.displayName=l.bL.displayName},25232:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(95155),a=s(12115),l=s(35695),i=s(88482),n=s(97168),d=s(49026),o=s(5838),c=s(7550),u=s(85596),f=s(46414),x=s(14503);function h(){let[e,t]=(0,a.useState)({}),[s,h]=(0,a.useState)(0),[m,g]=(0,a.useState)(!1),p=(0,l.useRouter)(),{toast:v}=(0,x.dj)(),y=o.My.find(e=>"personality"===e.id),j=(null==y?void 0:y.questions)||[];(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await f.N.auth.getSession();if(!e){p.push("/auth/login");return}let{data:s}=await f.N.from("questionnaire_results").select("personality").eq("user_id",e.user.id).single();if(null==s?void 0:s.personality){let e={};Object.entries(s.personality).forEach(t=>{let[s,r]=t;e[s]=r}),t(e)}})()},[p]);let b=j[s],N=s===j.length-1,w=async()=>{try{g(!0);let{data:{session:t}}=await f.N.auth.getSession();if(!t){p.push("/auth/login");return}let s={};j.forEach(t=>{let r=e[t.id]||0;s[t.category]||(s[t.category]=[]),s[t.category].push(r)});let r={};Object.entries(s).forEach(e=>{let[t,s]=e,a=s.reduce((e,t)=>e+t,0)/s.length;r[t]=parseFloat(a.toFixed(2))});let{error:a}=await f.N.from("questionnaire_results").update({personality:r}).eq("user_id",t.user.id);if(a)throw a;v({title:"Progress saved",description:"Your answers have been saved successfully"}),p.push("/questionnaire/experiences")}catch(e){v({title:"Error",description:e.message||"Failed to save your answers",variant:"destructive"})}finally{g(!1)}},S=b&&void 0!==e[b.id];return(0,r.jsxs)("div",{className:"space-y-6 py-8",children:[(0,r.jsx)(c.v,{currentSection:3,totalSections:4,currentQuestion:s+1,totalQuestions:j.length}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"Personality (Kepribadian)"}),(0,r.jsx)(i.BT,{children:'Jawablah setiap pernyataan dengan skala 1-5, di mana 1 adalah "Sangat Tidak Setuju" dan 5 adalah "Sangat Setuju".'})]}),(0,r.jsxs)(i.Wu,{className:"space-y-4",children:[b&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-medium mb-4",children:[s+1,". ",b.text]}),(0,r.jsx)(u.z,{questionId:b.id,value:e[b.id]||0,onChange:e=>{t(t=>({...t,[b.id]:e}))}})]}),!S&&(0,r.jsxs)(d.Fc,{variant:"destructive",children:[(0,r.jsx)(d.XL,{children:"Required"}),(0,r.jsx)(d.TN,{children:"Please select a rating before proceeding."})]})]}),(0,r.jsxs)(i.wL,{className:"flex justify-between",children:[(0,r.jsx)(n.$,{variant:"outline",onClick:()=>{s>0?h(s-1):p.push("/questionnaire/heart")},children:"Previous"}),N?(0,r.jsx)(n.$,{onClick:w,disabled:!S||m,children:m?"Saving...":"Continue to Next Section"}):(0,r.jsx)(n.$,{onClick:()=>{s<j.length-1&&h(s+1)},disabled:!S,children:"Next Question"})]})]})]})}},49026:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>d,TN:()=>c,XL:()=>o});var r=s(95155),a=s(12115),l=s(74466),i=s(53999);let n=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,...l}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(n({variant:a}),s),...l})});d.displayName="Alert";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});o.displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...a})});c.displayName="AlertDescription"},82714:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var r=s(95155),a=s(12115),l=s(40968),i=s(74466),n=s(53999);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.b,{ref:t,className:(0,n.cn)(d(),s),...a})});o.displayName=l.b.displayName},85596:(e,t,s)=>{"use strict";s.d(t,{z:()=>u});var r=s(95155),a=s(12115),l=s(75122),i=s(9428),n=s(53999);let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.bL,{className:(0,n.cn)("grid gap-2",s),...a,ref:t})});d.displayName=l.bL.displayName;let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.q7,{ref:t,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,r.jsx)(l.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=l.q7.displayName;var c=s(82714);function u(e){let{questionId:t,value:s,onChange:a}=e;return(0,r.jsx)(d,{value:(null==s?void 0:s.toString())||"",onValueChange:e=>a(Number.parseInt(e)),className:"flex justify-between space-x-1 py-2",children:[1,2,3,4,5].map(e=>(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(o,{value:e.toString(),id:"rating-".concat(t,"-").concat(e),className:"sr-only"}),(0,r.jsx)(c.J,{htmlFor:"rating-".concat(t,"-").concat(e),className:"flex h-12 w-12 cursor-pointer items-center justify-center rounded-full border-2 ".concat(s===e?"border-primary bg-primary text-primary-foreground":"border-muted-foreground/20 hover:border-muted-foreground/40 hover:bg-muted"),children:e}),(0,r.jsx)("span",{className:"mt-1 text-xs text-muted-foreground",children:1===e?"Strongly Disagree":2===e?"Disagree":3===e?"Neutral":4===e?"Agree":"Strongly Agree"})]},e))})}},87125:(e,t,s)=>{Promise.resolve().then(s.bind(s,25232))}},e=>{var t=t=>e(e.s=t);e.O(0,[352,769,559,124,257,441,684,358],()=>t(87125)),_N_E=e.O()}]);