(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{7550:(e,t,s)=>{"use strict";s.d(t,{v:()=>d});var r=s(95155),a=s(12115),i=s(55863),l=s(53999);let n=a.forwardRef((e,t)=>{let{className:s,value:a,...n}=e;return(0,r.jsx)(i.bL,{ref:t,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...n,children:(0,r.jsx)(i.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});function d(e){let{currentSection:t,totalSections:s,currentQuestion:a,totalQuestions:i}=e,l=Math.round(t/s*100),d=Math.round(a/i*100);return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Section ",t," of ",s]}),(0,r.jsxs)("span",{children:[l,"% Complete"]})]}),(0,r.jsx)(n,{value:l,className:"h-2"}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Question ",a," of ",i]}),(0,r.jsxs)("span",{children:[d,"% Complete"]})]}),(0,r.jsx)(n,{value:d,className:"h-1"})]})}n.displayName=i.bL.displayName},49026:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>d,TN:()=>c,XL:()=>o});var r=s(95155),a=s(12115),i=s(74466),l=s(53999);let n=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,...i}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(n({variant:a}),s),...i})});d.displayName="Alert";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});o.displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",s),...a})});c.displayName="AlertDescription"},51777:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(95155),a=s(12115),i=s(35695),l=s(88482),n=s(97168),d=s(49026),o=s(5838),c=s(7550),u=s(96756),f=s(46414),g=s(14503);function h(){let[e,t]=(0,a.useState)({}),[s,h]=(0,a.useState)(0),[m,x]=(0,a.useState)(!1),p=(0,i.useRouter)(),{toast:v}=(0,g.dj)(),j=o.My.find(e=>"spiritual"===e.id),b=(null==j?void 0:j.questions)||[];(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await f.N.auth.getSession();if(!e){p.push("/auth/login");return}let{data:s}=await f.N.from("questionnaire_results").select("spiritual_gifts").eq("user_id",e.user.id).single();if(null==s?void 0:s.spiritual_gifts){let e={};Object.entries(s.spiritual_gifts).forEach(t=>{let[s,r]=t;e[s]=r}),t(e)}})()},[p]);let N=b[s],y=s===b.length-1,w=async()=>{try{x(!0);let{data:{session:t}}=await f.N.auth.getSession();if(!t){p.push("/auth/login");return}let s={raw_answers:e,categories:{}},r={};b.forEach(t=>{let s=e[t.id]||0;r[t.category]||(r[t.category]=[]),r[t.category].push(s)}),Object.entries(r).forEach(e=>{let[t,r]=e,a=r.reduce((e,t)=>e+t,0)/r.length;s.categories[t]=parseFloat(a.toFixed(2))});let{error:a}=await f.N.from("questionnaire_results").update({spiritual_gifts:s}).eq("user_id",t.user.id);if(a)throw a;v({title:"Progress saved",description:"Your answers have been saved successfully"}),p.push("/questionnaire/heart")}catch(e){v({title:"Error",description:e.message||"Failed to save your answers",variant:"destructive"})}finally{x(!1)}},S=N&&void 0!==e[N.id];return(0,r.jsxs)("div",{className:"space-y-6 py-8",children:[(0,r.jsx)(c.v,{currentSection:1,totalSections:4,currentQuestion:s+1,totalQuestions:b.length}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Spiritual Gifts (Karunia Rohani)"}),(0,r.jsx)(l.BT,{children:'Jawablah setiap pernyataan dengan skala 1-5, di mana 1 adalah "Sangat Tidak Setuju" dan 5 adalah "Sangat Setuju".'})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[N&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-medium mb-4",children:[s+1,". ",N.text]}),(0,r.jsx)(u.z,{questionId:N.id,value:e[N.id]||0,onChange:e=>{t(t=>({...t,[N.id]:e}))}})]}),!S&&(0,r.jsxs)(d.Fc,{variant:"destructive",children:[(0,r.jsx)(d.XL,{children:"Required"}),(0,r.jsx)(d.TN,{children:"Please select a rating before proceeding."})]})]}),(0,r.jsxs)(l.wL,{className:"flex justify-between",children:[(0,r.jsx)(n.$,{variant:"outline",onClick:()=>{s>0&&h(s-1)},disabled:0===s,children:"Previous"}),y?(0,r.jsx)(n.$,{onClick:w,disabled:!S||m,children:m?"Saving...":"Continue to Next Section"}):(0,r.jsx)(n.$,{onClick:()=>{s<b.length-1&&h(s+1)},disabled:!S,children:"Next Question"})]})]})]})}},55747:(e,t,s)=>{"use strict";s.d(t,{C:()=>o,z:()=>d});var r=s(95155),a=s(12115),i=s(54059),l=s(9428),n=s(53999);let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.bL,{className:(0,n.cn)("grid gap-2",s),...a,ref:t})});d.displayName=i.bL.displayName;let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.q7,{ref:t,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,r.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=i.q7.displayName},71118:(e,t,s)=>{Promise.resolve().then(s.bind(s,51777))},82714:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var r=s(95155),a=s(12115),i=s(40968),l=s(74466),n=s(53999);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.b,{ref:t,className:(0,n.cn)(d(),s),...a})});o.displayName=i.b.displayName},96756:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var r=s(95155),a=s(55747),i=s(82714);function l(e){let{questionId:t,value:s,onChange:l}=e;return(0,r.jsx)(a.z,{value:(null==s?void 0:s.toString())||"",onValueChange:e=>l(Number.parseInt(e)),className:"flex justify-between space-x-1 py-2",children:[1,2,3,4,5].map(e=>(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(a.C,{value:e.toString(),id:"rating-".concat(t,"-").concat(e),className:"sr-only"}),(0,r.jsx)(i.J,{htmlFor:"rating-".concat(t,"-").concat(e),className:"flex h-12 w-12 cursor-pointer items-center justify-center rounded-full border-2 ".concat(s===e?"border-primary bg-primary text-primary-foreground":"border-muted-foreground/20 hover:border-muted-foreground/40 hover:bg-muted"),children:e}),(0,r.jsx)("span",{className:"mt-1 text-xs text-muted-foreground",children:1===e?"Strongly Disagree":2===e?"Disagree":3===e?"Neutral":4===e?"Agree":"Strongly Agree"})]},e))})}}},e=>{var t=t=>e(e.s=t);e.O(0,[352,769,559,221,257,441,684,358],()=>t(71118)),_N_E=e.O()}]);